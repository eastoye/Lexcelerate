import{o as m,l as g,s as f,a as y}from"./firestore-utils-B_MIlV0d.js";/* empty css              */let d=!0,a=[];const r=["serendipity","eloquence","ephemeral","labyrinth","mellifluous","quintessential","ubiquitous","perspicacious","magnanimous","effervescent"];document.addEventListener("DOMContentLoaded",function(){w(),E(),k()});function E(){m(async e=>{e?(p(e),await I(),v()):window.location.href="login.html"})}function p(e){const t=document.getElementById("user-info"),n=document.getElementById("user-avatar"),o=document.getElementById("user-name");if(e){const i=e.displayName||e.email.split("@")[0],u=i.charAt(0).toUpperCase();n.textContent=u,o.textContent=i,t.style.display="flex"}else t.style.display="none"}function w(){const e=localStorage.getItem("soundEnabled");d=e!==null?JSON.parse(e):!0,l()}function h(){localStorage.setItem("soundEnabled",JSON.stringify(d))}function l(){const e=document.getElementById("sound-icon"),t=document.getElementById("sound-toggle-btn");d?(e.textContent="üîä",t.classList.remove("sound-off")):(e.textContent="üîá",t.classList.add("sound-off"))}async function I(){const e=document.getElementById("sync-status");e.textContent="üîÑ Syncing...",e.style.color="var(--warning-orange)";try{const t=localStorage.getItem("wordCatalogue"),n=t?JSON.parse(t):[];n.forEach(o=>{typeof o.score!="number"&&(o.score=0),typeof o.streak!="number"&&(o.streak=0),o.definition||(o.definition=""),o.dateAdded||(o.dateAdded=new Date().toISOString())}),a=await y(n),localStorage.setItem("wordCatalogue",JSON.stringify(a)),e.textContent="‚òÅÔ∏è Synced",e.style.color="var(--success-green)",c()}catch(t){console.error("Error loading word catalogue:",t),e.textContent="‚ö†Ô∏è Offline",e.style.color="var(--error-red)";const n=localStorage.getItem("wordCatalogue");a=n?JSON.parse(n):[],c()}}async function S(){localStorage.setItem("wordCatalogue",JSON.stringify(a));try{await f(a);const e=document.getElementById("sync-status");e.textContent="‚òÅÔ∏è Synced",e.style.color="var(--success-green)"}catch(e){console.error("Error saving to Firebase:",e);const t=document.getElementById("sync-status");t.textContent="‚ö†Ô∏è Offline",t.style.color="var(--error-red)"}}function v(){const e=localStorage.getItem("wotd"),t=localStorage.getItem("wotdTimestamp"),n=Date.now(),o=24*60*60*1e3;if(e&&t&&n-parseInt(t)<o)document.getElementById("wotd").textContent=e;else{const i=r[Math.floor(Math.random()*r.length)];localStorage.setItem("wotd",i),localStorage.setItem("wotdTimestamp",n.toString()),document.getElementById("wotd").textContent=i}}function c(){const e=document.getElementById("word-count");e.textContent=a.length}function s(e,t="success"){const n=document.getElementById("notification");n.textContent=e,n.className=`notification ${t}`,n.style.display="block",setTimeout(()=>{n.style.display="none"},3e3)}async function C(e){try{const n=await(await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${e}`)).json();return Array.isArray(n)&&n[0].meanings&&n[0].meanings.length>0?n[0].meanings[0].definitions[0].definition:"Definition not found."}catch(t){return console.error("Error fetching definition:",t),"Error fetching definition."}}async function B(e,t=""){return a.find(o=>o.word.toLowerCase()===e.toLowerCase())?(s(`"${e}" is already in your catalogue.`,"warning"),!1):(a.push({word:e,definition:t,score:0,streak:0,dateAdded:new Date().toISOString()}),await S(),c(),s(`"${e}" added to your catalogue!`),!0)}function k(){document.getElementById("help-btn").addEventListener("click",()=>{document.getElementById("help-modal").style.display="block"}),document.getElementById("help-close").addEventListener("click",()=>{document.getElementById("help-modal").style.display="none"}),window.addEventListener("click",t=>{const n=document.getElementById("help-modal");t.target===n&&(n.style.display="none")}),document.getElementById("sound-toggle-btn").addEventListener("click",()=>{d=!d,h(),l(),s(`Sound ${d?"enabled":"disabled"}`,"info")}),document.getElementById("logout-btn").addEventListener("click",async()=>{(await g()).success?s("Signed out successfully","info"):s("Error signing out","warning")}),document.getElementById("word-of-day").addEventListener("click",async()=>{const t=document.getElementById("wotd").textContent;if(t&&t!=="Loading..."){s("Fetching definition...","info");const n=await C(t);confirm(`Word: ${t}

Definition: ${n}

Would you like to add this word to your catalogue?`)&&await B(t,n)}}),document.getElementById("add-word-btn").addEventListener("click",()=>{window.location.href="add-word.html"}),document.getElementById("practice-btn").addEventListener("click",()=>{window.location.href="practice.html"}),document.getElementById("stats-btn").addEventListener("click",()=>{window.location.href="stats.html"});const e=document.querySelectorAll(".nav-icon");e.forEach((t,n)=>{t.addEventListener("click",()=>{switch(e.forEach(o=>o.classList.remove("active")),t.classList.add("active"),n){case 0:break;case 1:document.getElementById("add-word-btn").click();break;case 2:document.getElementById("stats-btn").click();break}})})}
