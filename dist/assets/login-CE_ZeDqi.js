import{d as l,a as c,g,b as y,c as w,s as f,e as I,f as E,h as b}from"./auth-utils-DIPdzJad.js";/* empty css              */const d={WORD_CATALOGUES:"wordCatalogues",RANDOM_TRIALS:"randomTrials"};function m(){const n=w();if(n)return n.uid;let e=localStorage.getItem("lexcelerate_user_id");return e||(e="anonymous_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("lexcelerate_user_id",e)),e}async function v(n){try{const e=m(),t=l(c,d.WORD_CATALOGUES,e);return await f(t,{words:n,lastUpdated:I(),userId:e},{merge:!0}),console.log("Word catalogue saved to Firestore"),!0}catch(e){return console.error("Error saving word catalogue to Firestore:",e),!1}}async function T(n){try{const e=m(),t=l(c,d.RANDOM_TRIALS,e);return await f(t,{trials:n,lastUpdated:I(),userId:e},{merge:!0}),console.log("Random trials saved to Firestore"),!0}catch(e){return console.error("Error saving random trials to Firestore:",e),!1}}async function p(n){try{const e=m();if(n===e)return;const t=l(c,d.WORD_CATALOGUES,n),s=l(c,d.RANDOM_TRIALS,n),[o,i]=await Promise.all([g(t),g(s)]);if(o.exists()){const a=o.data();await v(a.words||[]),await y(t)}if(i.exists()){const a=i.data();await T(a.trials||[]),await y(s)}console.log("Successfully migrated anonymous data to authenticated user")}catch(e){console.error("Error migrating anonymous data:",e)}}function r(n,e="success"){const t=document.getElementById("notification");t.textContent=n,t.className=`notification ${e}`,t.style.display="block",setTimeout(()=>{t.style.display="none"},3e3)}document.getElementById("signin-tab").addEventListener("click",()=>{document.getElementById("signin-tab").classList.add("active"),document.getElementById("signup-tab").classList.remove("active"),document.getElementById("signin-form").style.display="block",document.getElementById("signup-form").style.display="none"});document.getElementById("signup-tab").addEventListener("click",()=>{document.getElementById("signup-tab").classList.add("active"),document.getElementById("signin-tab").classList.remove("active"),document.getElementById("signup-form").style.display="block",document.getElementById("signin-form").style.display="none"});document.getElementById("signin-form").addEventListener("submit",async n=>{n.preventDefault();const e=document.getElementById("signin-email").value.trim(),t=document.getElementById("signin-password").value,s=document.getElementById("signin-submit");if(!e||!t){r("Please fill in all fields","warning");return}const o=s.innerHTML;s.innerHTML='<span class="btn-icon">⏳</span><span class="btn-text">Signing In...</span>',s.disabled=!0;try{const i=await E(e,t);if(i.success){r("Welcome back!","success");const a=localStorage.getItem("lexcelerate_user_id");a&&a.startsWith("anonymous_")&&(await p(a),localStorage.removeItem("lexcelerate_user_id")),setTimeout(()=>{window.location.href="index.html"},1e3)}else r(i.error,"warning")}catch{r("Sign in failed. Please try again.","warning")}finally{s.innerHTML=o,s.disabled=!1}});document.getElementById("signup-form").addEventListener("submit",async n=>{n.preventDefault();const e=document.getElementById("signup-name").value.trim(),t=document.getElementById("signup-email").value.trim(),s=document.getElementById("signup-password").value,o=document.getElementById("signup-submit");if(!t||!s){r("Please fill in all required fields","warning");return}if(s.length<6){r("Password must be at least 6 characters","warning");return}const i=o.innerHTML;o.innerHTML='<span class="btn-icon">⏳</span><span class="btn-text">Creating Account...</span>',o.disabled=!0;try{const a=await b(t,s,e);if(a.success){r("Account created successfully!","success");const u=localStorage.getItem("lexcelerate_user_id");u&&u.startsWith("anonymous_")&&(await p(u),localStorage.removeItem("lexcelerate_user_id")),setTimeout(()=>{window.location.href="index.html"},1e3)}else r(a.error,"warning")}catch{r("Account creation failed. Please try again.","warning")}finally{o.innerHTML=i,o.disabled=!1}});document.getElementById("guest-btn").addEventListener("click",()=>{window.location.href="index.html"});
