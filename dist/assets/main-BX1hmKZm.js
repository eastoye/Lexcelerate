import{o as b,l as L}from"./auth-utils-DIPdzJad.js";/* empty css              */const A="modulepreload",O=function(e){return"/"+e},w={},D=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),s=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(i=>{if(i=O(i),i in w)return;w[i]=!0;const u=i.endsWith(".css"),k=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${k}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":A,u||(d.as="script"),d.crossOrigin="",d.href=i,s&&d.setAttribute("nonce",s),document.head.appendChild(d),u)return new Promise((B,C)=>{d.addEventListener("load",B),d.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${i}`)))})}))}function m(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return r.then(a=>{for(const s of a||[])s.status==="rejected"&&m(s.reason);return t().catch(m)})},I="/api";async function v(e,t){try{const n=await fetch(`${I}/word-catalogue`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await S()}`},body:JSON.stringify({uid:t,data:e,updated:new Date().toISOString()})});if(!n.ok)throw new Error(`Backend API error: ${n.status} ${n.statusText}`);const o=await n.json();return console.log("Word catalogue saved to backend successfully"),o}catch(n){throw console.error("Error saving to backend:",n),n}}async function $(e){try{const t=await fetch(`${I}/word-catalogue/${e}`,{headers:{Authorization:`Bearer ${await S()}`}});if(!t.ok){if(t.status===404)return{wordCatalogue:[],lastUpdated:null};throw new Error(`Backend API error: ${t.status} ${t.statusText}`)}const n=await t.json();return console.log("Word catalogue loaded from backend successfully"),{wordCatalogue:n.data||[],lastUpdated:n.updated}}catch(t){throw console.error("Error loading from backend:",t),t}}async function W(e,t){try{if(!t)return e;const n=await $(t);return n.wordCatalogue.length>0?(localStorage.setItem("wordCatalogue",JSON.stringify(n.wordCatalogue)),n.wordCatalogue):e.length>0?(await v(e,t),e):[]}catch(n){return console.error("Error syncing with backend:",n),e}}async function S(){const{getCurrentUser:e}=await D(async()=>{const{getCurrentUser:n}=await import("./auth-utils-DIPdzJad.js").then(o=>o.i);return{getCurrentUser:n}},[]),t=e();if(t)return await t.getIdToken();throw new Error("User not authenticated")}const x="/api/word-of-day",h=[{word:"serendipity",definition:"The occurrence and development of events by chance in a happy or beneficial way."},{word:"eloquence",definition:"Fluent or persuasive speaking or writing."},{word:"ephemeral",definition:"Lasting for a very short time."},{word:"labyrinth",definition:"A complicated network of paths or passages; a maze."},{word:"mellifluous",definition:"Sweet or musical; pleasant to hear."},{word:"quintessential",definition:"Representing the most perfect example of a quality or class."},{word:"ubiquitous",definition:"Present, appearing, or found everywhere."},{word:"perspicacious",definition:"Having a ready insight into and understanding of things."},{word:"magnanimous",definition:"Very generous or forgiving, especially toward a rival or less powerful person."},{word:"effervescent",definition:"Vivacious and enthusiastic; giving off bubbles."}];function f(){return new Date().toISOString().split("T")[0]}async function T(){try{const e=await fetch(x);if(!e.ok)throw new Error(`API error: ${e.status}`);const t=await e.json();return{word:t.word,definition:t.definition||"Definition not available"}}catch(e){return console.error("Error fetching word of the day from API:",e),null}}function P(){const n=f().split("-").reduce((o,r)=>o+parseInt(r),0)%h.length;return h[n]}async function _(){const t=`wotd_${f()}`,n=localStorage.getItem(t);if(n)try{return JSON.parse(n)}catch(r){console.error("Error parsing cached word of the day:",r)}let o=await T();return o||(o=P()),localStorage.setItem(t,JSON.stringify(o)),N(),o}function N(){const t=Object.keys(localStorage).filter(o=>o.startsWith("wotd_")),n=f();t.forEach(o=>{o!==`wotd_${n}`&&localStorage.removeItem(o)})}let c=[],l=null;document.addEventListener("DOMContentLoaded",function(){J(),U(),K(),R()});function U(){b(async e=>{l=e,e?(p(e),await E(),document.getElementById("guest-notice").style.display="none"):(p(null),await E(),document.getElementById("guest-notice").style.display="block")})}function p(e){const t=document.getElementById("logout-btn");e?t.style.display="flex":t.style.display="none"}function J(){const e=localStorage.getItem("soundEnabled");e!==null&&JSON.parse(e)}async function E(){const e=document.getElementById("sync-status");e.textContent="🔄 Syncing...",e.style.color="var(--warning-orange)";try{const t=localStorage.getItem("wordCatalogue"),n=t?JSON.parse(t):[];n.forEach(r=>{typeof r.score!="number"&&(r.score=0),typeof r.streak!="number"&&(r.streak=0),r.definition||(r.definition=""),r.dateAdded||(r.dateAdded=new Date().toISOString())});const o=l?l.uid:null;c=await W(n,o),localStorage.setItem("wordCatalogue",JSON.stringify(c)),l?(e.textContent="☁️ Synced",e.style.color="var(--success-green)"):(e.textContent="💾 Local Storage",e.style.color="var(--gold-muted)"),g()}catch(t){console.error("Error loading word catalogue:",t),e.textContent="⚠️ Offline",e.style.color="var(--error-red)";const n=localStorage.getItem("wordCatalogue");c=n?JSON.parse(n):[],g()}}async function q(){if(localStorage.setItem("wordCatalogue",JSON.stringify(c)),l)try{await v(c,l.uid);const e=document.getElementById("sync-status");e.textContent="☁️ Synced",e.style.color="var(--success-green)"}catch(e){console.error("Error saving to backend:",e);const t=document.getElementById("sync-status");t.textContent="⚠️ Offline",t.style.color="var(--error-red)"}}async function R(){try{const e=await _();document.getElementById("wotd").textContent=e.word,document.getElementById("wotd").dataset.definition=e.definition}catch(e){console.error("Error loading word of the day:",e),document.getElementById("wotd").textContent="serendipity",document.getElementById("wotd").dataset.definition="The occurrence and development of events by chance in a happy or beneficial way."}}function g(){const e=document.getElementById("word-count");e.textContent=c.length}function y(e,t="success"){const n=document.getElementById("notification");n.textContent=e,n.className=`notification ${t}`,n.style.display="block",setTimeout(()=>{n.style.display="none"},3e3)}async function F(e,t=""){return c.find(o=>o.word.toLowerCase()===e.toLowerCase())?(y(`"${e}" is already in your catalogue.`,"warning"),!1):(c.push({word:e,definition:t,score:0,streak:0,dateAdded:new Date().toISOString()}),await q(),g(),y(`"${e}" added to your catalogue!`),!0)}function K(){document.getElementById("help-btn").addEventListener("click",()=>{document.getElementById("help-modal").style.display="block"}),document.getElementById("help-close").addEventListener("click",()=>{document.getElementById("help-modal").style.display="none"}),document.getElementById("logout-btn").addEventListener("click",()=>{document.getElementById("logout-modal").style.display="block"}),document.getElementById("logout-confirm-btn").addEventListener("click",async()=>{document.getElementById("logout-modal").style.display="none",(await L()).success?y("Signed out successfully","info"):y("Error signing out","warning")}),document.getElementById("logout-cancel-btn").addEventListener("click",()=>{document.getElementById("logout-modal").style.display="none"}),document.getElementById("logout-close").addEventListener("click",()=>{document.getElementById("logout-modal").style.display="none"}),window.addEventListener("click",t=>{const n=document.getElementById("help-modal"),o=document.getElementById("logout-modal");t.target===n&&(n.style.display="none"),t.target===o&&(o.style.display="none")}),document.getElementById("word-of-day").addEventListener("click",async()=>{const t=document.getElementById("wotd"),n=t.textContent,o=t.dataset.definition;n&&n!=="Loading..."&&confirm(`Word: ${n}

Definition: ${o}

Would you like to add this word to your catalogue?`)&&await F(n,o)}),document.getElementById("add-word-btn").addEventListener("click",()=>{window.location.href="add-word.html"}),document.getElementById("practice-btn").addEventListener("click",()=>{window.location.href="practice.html"}),document.getElementById("stats-btn").addEventListener("click",()=>{window.location.href="stats.html"});const e=document.querySelectorAll(".nav-icon");e.forEach((t,n)=>{t.addEventListener("click",()=>{switch(e.forEach(o=>o.classList.remove("active")),t.classList.add("active"),n){case 0:break;case 1:document.getElementById("add-word-btn").click();break;case 2:document.getElementById("stats-btn").click();break}})})}
